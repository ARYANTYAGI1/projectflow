import{an as m,au as L,o as p,c as y,a as n,C as l,y as a,D as o,E as c,M as b,l as g,s as f,N}from"./@vue-7664832f.js";import{_ as $}from"./index-b0184b1b.js";import{g as v,d as D}from"./user-c789e581.js";import"./vuex-235c7b47.js";import"./js-cookie-edb2da2a.js";import"./vue-router-627d3bcd.js";import"./axios-dd1c8fc2.js";import"./element-plus-97d68548.js";import"./lodash-es-2e98bc53.js";import"./@element-plus-7759aa15.js";import"./@popperjs-d53b9d70.js";import"./@ctrl-f8748455.js";import"./dayjs-de1d8cda.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-10c90328.js";import"./vue-i18n-f00e7388.js";import"./@intlify-ddb89f4e.js";import"./simplebar-vue-88307be6.js";import"./simplebar-core-cc63b2ef.js";import"./metismenujs-584191f1.js";import"./bootstrap-vue-next-01df5512.js";import"./maska-1eacf752.js";import"./moment-aaecb89a.js";const P={data(){return{listLoading:!1,listQuery:{page:1,limit:10},userList:[],total:0}},computed:{totalPages(){return Math.ceil(this.total/this.listQuery.limit)}},created(){this.getPageInfo()},methods:{async getPageInfo(){this.listLoading=!0;const t=await v(this.listQuery);this.userList=t.data.data,this.total=t.data.totalCount,this.listLoading=!1},async handleFilter(){this.listLoading=!0;const t=await v(this.listQuery);this.userList=t.data.data,this.total=t.data.totalCount,this.listLoading=!1},async handlePageChange(t){this.listQuery.page=t,await this.handleFilter()},deleteUser(t){this.$confirm(this.$t("company.confirmTodeleteUser"),this.$t("company.warning"),{confirmButtonText:this.$t("company.confirm"),cancelButtonText:this.$t("company.cancel"),type:"warning"}).then(async()=>{D(t).then(s=>{this.$message.success({message:s.data.message});var h=this.total/10;h.toString().split(".")[1]==="1"&&(this.listQuery.page<1?this.listQuery.page-1:this.listQuery.page=1),this.getPageInfo()}).catch(s=>{this.$message.error(s.message)})}).catch(s=>{console.log(s)})},formatDate(t){return this.$filters.formatDate(t)}}},U={class:"d-flex justify-content-between mb-3"},B={class:"w-100 me-2"},z={class:"d-flex"},E={class:"user-table"},T={class:"d-flex justify-content-center"},S=n("i",{class:"mdi mdi-eye"},null,-1),A=n("i",{class:"mdi mdi-account-edit"},null,-1),F=n("i",{class:"mdi mdi-delete"},null,-1),I={class:"page-pagination"},j={class:"pagination-container"},x={class:"pagination-text"};function M(t,s,h,K,i,u){const w=m("el-input"),r=m("el-button"),_=m("router-link"),d=m("el-table-column"),C=m("el-table"),Q=m("el-pagination"),V=m("el-card"),k=L("loading");return p(),y("div",null,[n("section",null,[l(V,{class:"full-height-card"},{default:a(()=>[n("div",U,[n("div",B,[l(w,{modelValue:i.listQuery.name,"onUpdate:modelValue":s[0]||(s[0]=e=>i.listQuery.name=e),placeholder:t.$t("company.searchByNameEmail"),onKeyup:s[1]||(s[1]=e=>u.handleFilter())},null,8,["modelValue","placeholder"])]),n("div",z,[l(_,{to:"/users/create"},{default:a(()=>[l(r,{class:"btn btn-primary me-2 w-100"},{default:a(()=>[o(c(t.$t("table.addUser")),1)]),_:1})]),_:1})])]),b((p(),y("div",E,[l(C,{data:i.userList,border:"",style:{width:"100%"}},{default:a(()=>[l(d,{align:"center",label:t.$t("company.fullName")},{default:a(e=>[o(c(e.row.fullName?e.row.fullName:"--"),1)]),_:1},8,["label"]),l(d,{align:"center",label:t.$t("company.email")},{default:a(e=>[o(c(e.row.email),1)]),_:1},8,["label"]),l(d,{align:"center",label:t.$t("company.verified")},{default:a(e=>[e.row.isEmailVerified?f("",!0):(p(),g(r,{key:0,type:"danger",size:"small",class:"statusbtn",title:"Non verificato"},{default:a(()=>[o("Non verificato")]),_:1})),e.row.isEmailVerified?(p(),g(r,{key:1,type:"success",size:"small",class:"statusbtn",style:{"pointer-events":"none"},title:"Verificati"},{default:a(()=>[o("Verificato")]),_:1})):f("",!0)]),_:1},8,["label"]),l(d,{align:"center",label:t.$t("company.status"),width:"130"},{default:a(e=>[e.row.isActive==!1?(p(),g(r,{key:0,type:"danger",size:"small",style:{"pointer-events":"none"},title:"company.inactive",class:"statusbtn"},{default:a(()=>[o(c(t.$t("company.inactive")),1)]),_:1})):f("",!0),e.row.isActive==!0?(p(),g(r,{key:1,type:"success",size:"small",style:{"pointer-events":"none"},title:"company.active",class:"statusbtn"},{default:a(()=>[o(c(t.$t("company.active")),1)]),_:1})):f("",!0)]),_:1},8,["label"]),l(d,{align:"center",label:t.$t("table.lastLogin")},{default:a(e=>[o(c(u.formatDate(e.row.lastLogin)),1)]),_:1},8,["label"]),l(d,{align:"center",label:t.$t("table.created_at")},{default:a(e=>[o(c(u.formatDate(e.row.created_at)),1)]),_:1},8,["label"]),l(d,{align:"center",label:t.$t("table.actions"),width:"180"},{default:a(({row:e})=>[n("div",T,[l(_,{to:`/users/view/${e._id}`,class:"pe-2"},{default:a(()=>[l(r,{class:"btn btn-primary table-icon-btn"},{default:a(()=>[S]),_:1})]),_:2},1032,["to"]),l(_,{to:`/users/create/${e._id}`,class:"pe-2"},{default:a(()=>[l(r,{class:"btn btn-primary table-icon-btn"},{default:a(()=>[A]),_:1})]),_:2},1032,["to"]),l(r,{class:"btn btn-primary delete-btn table-icon-btn",onClick:q=>u.deleteUser(`${e._id}`)},{default:a(()=>[F]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"]),b(n("div",I,[n("div",j,[l(Q,{background:"",modelValue:i.listQuery.page,"onUpdate:modelValue":s[2]||(s[2]=e=>i.listQuery.page=e),"page-size":i.listQuery.limit,total:i.total,layout:"prev, pager, next",onCurrentChange:u.handlePageChange},null,8,["modelValue","page-size","total","onCurrentChange"]),n("span",x,c(t.$t("Settings.packageAgent.paginationText",{page:i.listQuery.page,totalPages:u.totalPages,total:i.total})),1)])],512),[[N,i.total>i.listQuery.limit]])])),[[k,i.listLoading]])]),_:1})])])}const _t=$(P,[["render",M]]);export{_t as default};
