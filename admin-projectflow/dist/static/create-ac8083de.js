import{_ as v,d as R}from"./index-b0184b1b.js";import{b as $,u as k}from"./user-c789e581.js";import{an as n,au as C,o as u,c as g,a as h,M as U,C as e,y as t,l as I,s as y,D as b,E as N}from"./@vue-7664832f.js";import"./vuex-235c7b47.js";import"./js-cookie-edb2da2a.js";import"./vue-router-627d3bcd.js";import"./axios-dd1c8fc2.js";import"./element-plus-97d68548.js";import"./lodash-es-2e98bc53.js";import"./@element-plus-7759aa15.js";import"./@popperjs-d53b9d70.js";import"./@ctrl-f8748455.js";import"./dayjs-de1d8cda.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-10c90328.js";import"./vue-i18n-f00e7388.js";import"./@intlify-ddb89f4e.js";import"./simplebar-vue-88307be6.js";import"./simplebar-core-cc63b2ef.js";import"./metismenujs-584191f1.js";import"./bootstrap-vue-next-01df5512.js";import"./maska-1eacf752.js";import"./moment-aaecb89a.js";const B={page:{title:"Create Profile",meta:[{name:"description"}]},data(){return{signupRequest:!1,detailLoading:!1,id:"",signupForm:{firstName:"",lastName:"",email:"",password:""},rules:{firstName:[{required:!0,message:this.$t("company.firstNameIsRequired"),trigger:"change"}],lastName:[{required:!0,message:this.$t("company.lastNameIsRequired"),trigger:"change"}],email:[{required:!0,message:this.$t("company.emailIsRequired"),trigger:"change"},{type:"email",message:this.$t("company.validEmail"),trigger:"change"}],password:[{required:!0,message:this.$t("company.passwordIsRequired"),trigger:"change"}]}}},created(){this.getPageInfo()},methods:{async getPageInfo(){if(this.detailLoading=!0,this.id=this.$route.params&&this.$route.params.id,this.id){const o=await $(this.id);this.signupForm=o.data.data}this.detailLoading=!1},validEmail(o){var i=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(o)},doSignup(o){this.$refs[o].validate(i=>{if(i){if(!this.validEmail(this.signupForm.email))return this.signupForm.email="",!1;const{firstName:c,lastName:f,email:s,address:d,password:p,_id:l}=this.signupForm,r={firstName:c,lastName:f,email:s,address:d,userType:2,isCreatedByAdmin:!0};l?(r._id=l,this.signupRequest=!0,k(l,r).then(a=>{this.signupRequest=!1,this.$message({type:"success",message:a.data.message}),this.$router.push({path:"/"})}).catch(a=>{this.signupRequest=!1,this.$message.error(a.message)})):(r.password=p,this.signupRequest=!0,R(r).then(a=>{this.signupRequest=!1,this.$router.push({path:"/login"}),this.$refs[o].resetFields(),this.$message({type:"success",message:a.data.message})}).catch(a=>{this.signupRequest=!1,this.$message.error(a.message)}))}else return console.log("error submit!!"),!1})}}},D={class:"profile-page mt-3"},E={class:"container-fluid"},L={class:"d-flex align-items-center justify-content-center mt-4"},S={key:0};function x(o,i,c,f,s,d){const p=n("el-input"),l=n("el-form-item"),r=n("el-col"),a=n("el-row"),_=n("el-button"),w=n("router-link"),F=n("el-form"),q=n("el-card"),V=C("loading");return u(),g("div",null,[h("section",D,[U((u(),g("div",E,[e(q,null,{default:t(()=>[e(F,{ref:"signupForm",model:s.signupForm,rules:s.rules,"label-width":"auto","label-position":"top"},{default:t(()=>[e(a,{gutter:20},{default:t(()=>[e(r,{md:12},{default:t(()=>[e(l,{label:o.$t("user.firstName"),prop:"firstName"},{default:t(()=>[e(p,{modelValue:s.signupForm.firstName,"onUpdate:modelValue":i[0]||(i[0]=m=>s.signupForm.firstName=m),type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(r,{md:12},{default:t(()=>[e(l,{label:o.$t("user.lastName"),prop:"lastName"},{default:t(()=>[e(p,{modelValue:s.signupForm.lastName,"onUpdate:modelValue":i[1]||(i[1]=m=>s.signupForm.lastName=m),type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(a,{gutter:20},{default:t(()=>[e(r,{md:12},{default:t(()=>[e(l,{label:o.$t("company.email"),prop:"email"},{default:t(()=>[e(p,{modelValue:s.signupForm.email,"onUpdate:modelValue":i[2]||(i[2]=m=>s.signupForm.email=m),type:"text",disabled:!!s.signupForm._id},null,8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1}),s.id?y("",!0):(u(),I(r,{key:0,md:12},{default:t(()=>[e(l,{label:o.$t("company.password"),prop:"password"},{default:t(()=>[e(p,{modelValue:s.signupForm.password,"onUpdate:modelValue":i[3]||(i[3]=m=>s.signupForm.password=m),type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}))]),_:1}),h("div",L,[e(_,{class:"btn btn-primary",disabled:s.signupRequest,onClick:i[4]||(i[4]=m=>d.doSignup("signupForm"))},{default:t(()=>[b(N(o.$t("company.save")),1),s.signupRequest?(u(),g("span",S," ...")):y("",!0)]),_:1},8,["disabled"]),e(w,{to:"/"},{default:t(()=>[e(_,{class:"btn btn-secondary ms-3"},{default:t(()=>[b(N(o.$t("company.cancel")),1)]),_:1})]),_:1})])]),_:1},8,["model","rules"])]),_:1})])),[[V,s.detailLoading]])])])}const ne=v(B,[["render",x]]);export{ne as default};
